<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>小码哥</title>
  
  <subtitle>尚未执佩剑，转眼即江湖</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://xmgeek.github.io/"/>
  <updated>2020-06-11T15:48:12.156Z</updated>
  <id>https://xmgeek.github.io/</id>
  
  <author>
    <name>小码哥</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>加密文章测试</title>
    <link href="https://xmgeek.github.io/posts/7e709353/"/>
    <id>https://xmgeek.github.io/posts/7e709353/</id>
    <published>2020-01-21T02:14:11.000Z</published>
    <updated>2020-06-11T15:48:12.156Z</updated>
    
    <content type="html"><![CDATA[<div id="hexo-blog-encrypt" data-wpm="不好意思，密码没对哦，在检查检查呢！" data-whm="不好意思，信息无法验证！">  <div class="hbe-input-container">  <input type="password" id="hbePass" placeholder="" />    <label for="hbePass">嗨，请准确无误地输入密码查看哟（密码：123456）！</label>    <div class="bottom-line"></div>  </div>  <script id="hbeData" type="hbeData" data-hmacdigest="7c9df5696499b0943b0714a90278edc9cdb12f7962c2949648214eee27e824eb">42401e656a30ed09e8e3b0fbe2fbd18ae1b8c2138de0b629bd1233cbc0cc80918b020088b54c79621b8ef9a9af7b0f06b4f358e8c86ef99d097fb161589581b453752da7da2e21aa4d35b94c835c62d1204ab327d5d9241d6be3c6b4b1e68d3697229826ffa52b53920e92cbe496af209269f803aa7450ba136338b0e891ba54f6fe48d0d23c1ba5b981305fdee3badd054b7ad20712af650adf010b25c3fa117b769979c2ef7a2ccccee14b24ed84530b911e7b68c43d9f4592ba8687b2c7fb</script></div><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
    
    <summary type="html">
    
      咦，这是一篇加密文章，好像需要输入密码才能查看呢！
    
    </summary>
    
    
      <category term="private" scheme="https://xmgeek.github.io/categories/private/"/>
    
    
      <category term="加密文章" scheme="https://xmgeek.github.io/tags/%E5%8A%A0%E5%AF%86%E6%96%87%E7%AB%A0/"/>
    
  </entry>
  
  <entry>
    <title>不蒜子统计常见问题</title>
    <link href="https://xmgeek.github.io/posts/89986481/"/>
    <id>https://xmgeek.github.io/posts/89986481/</id>
    <published>2019-12-21T00:46:08.000Z</published>
    <updated>2020-06-11T15:48:12.157Z</updated>
    
    <content type="html"><![CDATA[<p>不蒜子统计官网：<a href="http://busuanzi.ibruce.info/">http://busuanzi.ibruce.info/</a></p><p>详细使用教程：<a href="http://ibruce.info/2015/04/04/busuanzi/">http://ibruce.info/2015/04/04/busuanzi/</a></p><p>目前支持的功能：（两行代码，搞定计数；方便、简洁、实用）</p><p>a、显示站点总访问量</p><p>b、显示单页面访问量</p><a id="more"></a><p>c、显示站点总访问量和单页面访问量</p><p>d、只计数不显示</p><p>关于怎么实现当天、昨天、本月、上月（即具体时间段）的访问量目前没有支持，请配合目前不蒜子支持的功能自行实现。</p><h3 id="1-常见问题400错误，统计不生效"><a href="#1-常见问题400错误，统计不生效" class="headerlink" title="1.常见问题400错误，统计不生效"></a>1.常见问题400错误，统计不生效</h3><p><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191221085006.png" alt="">            </p><p>如图<strong>（1）</strong>的地方没有加载出统计数据</p><p>此时F12打开浏览器控制台，找到<strong>（2）</strong>network地方，刷新一下页面找到<strong>（3）</strong>，请求统计的网址如图所示，查看<strong>（4）</strong>referrer-policy是否如图所示，如图的话是不能访问的，需要更改。</p><p><strong>导致此问题原因</strong>，检查网页源码中，一般header有如下标签</p><p><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191221085114.png" alt="">    </p><p><strong>解决方法</strong>，去掉此标签，之后访问如下<strong>（1）</strong>已有统计值，<strong>（2）</strong>已改变。可详细对比正常使用不蒜子统计网址<a href="https://removeif.github.io/">https://removeif.github.io/</a> 中请求<strong>busuanzi?jsonpCallback=BusuanziCallback_236107382952地址</strong>的请求和返回参数的差异！</p><p><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191221085231.png" alt=""></p><p><strong>这样设置带来的影响</strong>，可能有些图床的图片不能显示，会图裂，如新浪图床。解决方法，可以用其他不冲突的图床。</p><h3 id="2-统计访问数巨大（清零问题）"><a href="#2-统计访问数巨大（清零问题）" class="headerlink" title="2.统计访问数巨大（清零问题）"></a>2.统计访问数巨大（清零问题）</h3><p><a href="http://localhost:4000/">http://localhost:4000/</a> 或<a href="http://127.0.0.1:4000/">http://127.0.0.1:4000/</a> 访问时，统计数巨大，这是正常的，不用清零。部署到线上，用线上域名网址访问数据就正常了。</p><h3 id="3-统计无法访问如图所示"><a href="#3-统计无法访问如图所示" class="headerlink" title="3.统计无法访问如图所示"></a>3.统计无法访问如图所示</h3><p><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191221085258.png" alt=""></p><p>查看红色url部分如下所示</p><p><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191221085320.png" alt=""></p><p>此问题是Request URL填写错误，请确保Request URL前部分为<a href="http://busuanzi.ibruce.info/busuanzi?"><strong>http://busuanzi.ibruce.info/busuanzi?</strong></a><strong>，，，，如下</strong></p><p><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191221085345.png" alt=""></p><p>同时查看Response，出现如下数据，就是成功访问了不蒜子统计，如果网站中还没出统计数据，就是自己的代码写错了，检查代码</p><p><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191221085405.png" alt=""></p><h3 id="4-其余问题"><a href="#4-其余问题" class="headerlink" title="4.其余问题"></a>4.其余问题</h3><p><strong>(1)</strong>.同一个页面，同名的id标签确保只能放一个如下</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"busuanzi_container_site_uv"</span> <span class="attr">style</span>=<span class="string">"display: inline;"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"busuanzi_value_site_uv"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure><p>同一个页面id名为busuanzi_value_site_uv只能放一个!</p><p><strong>(2)</strong>.safari（包括移动端的safari）浏览器页面pv统计问题，如下，因为Safari浏览器referer在文章页面时也上送的域名（而单个页面的pv统计是根据页面路径，即上送的referer），所以此时页面的pv返回的站点的pv值。暂时没解决方法，可自行搜索解决方案构造正确的referer值。对于此问题可以换个浏览器看哇，比如Chrome，哈哈。</p><p><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191221085514.png" alt=""></p><p><strong>(3)</strong>.部分live2d可能与不蒜子统计有冲突，出现此问题时，请查看网页源码引用统计id处是否被隐藏，一般网页上会自动加上display: none;自行选择性的使用。网友的解决方法，修改源码为以下，并引用修改后的js文件</p><p>不蒜子源码文件：</p><p><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191221085823.png" alt=""></p><p> 修改为如下：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">var bszCaller, bszTag;</span><br><span class="line"><span class="addition">!function() &#123;</span></span><br><span class="line">    var c, d, e, a = !1, b = [];</span><br><span class="line">    ready = function(c) &#123;</span><br><span class="line">        return a || "interactive" <span class="comment">=== document.readyState || "complete" === document.readyState ? c.call(document) : b.push(function() &#123;</span></span><br><span class="line">            return c.call(this)</span><br><span class="line">        &#125;),</span><br><span class="line">        this</span><br><span class="line">    &#125;</span><br><span class="line">    ,</span><br><span class="line">    d = function() &#123;</span><br><span class="line">        for (var a = 0, c = b.length; c &gt; a; a++)</span><br><span class="line">            b[a].apply(document);</span><br><span class="line">        b = []</span><br><span class="line">    &#125;</span><br><span class="line">    ,</span><br><span class="line">    e = function() &#123;</span><br><span class="line">        a || (a = !0,</span><br><span class="line">        d.call(window),</span><br><span class="line">        document.removeEventListener ? document.removeEventListener("DOMContentLoaded", e, !1) : document.attachEvent &amp;&amp; (document.detachEvent("onreadystatechange", e),</span><br><span class="line">        window == window.top &amp;&amp; (clearInterval(c),</span><br><span class="line">        c = null)))</span><br><span class="line">    &#125;</span><br><span class="line">    ,</span><br><span class="line">    document.addEventListener ? document.addEventListener("DOMContentLoaded", e, !1) : document.attachEvent &amp;&amp; (document.attachEvent("onreadystatechange", function() &#123;</span><br><span class="line">        /loaded|complete/.test(document.readyState) &amp;&amp; e()</span><br><span class="line">    &#125;),</span><br><span class="line">    window == window.top &amp;&amp; (c = setInterval(function() &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            a || document.documentElement.doScroll("left")</span><br><span class="line">        &#125; catch (b) &#123;</span><br><span class="line">            return</span><br><span class="line">        &#125;</span><br><span class="line">        e()</span><br><span class="line">    &#125;, 5)))</span><br><span class="line">&#125;(),</span><br><span class="line">bszCaller = &#123;</span><br><span class="line">    fetch: function(a, b) &#123;</span><br><span class="line">        var c = "BusuanziCallback_" + Math.floor(1099511627776 * Math.random());</span><br><span class="line">        window[c] = this.evalCall(b),</span><br><span class="line">        a = a.replace("=BusuanziCallback", "=" + c),</span><br><span class="line">        scriptTag = document.createElement("SCRIPT"),</span><br><span class="line">        scriptTag.type = "text/javascript",</span><br><span class="line">        scriptTag.defer = !0,</span><br><span class="line">        scriptTag.src = a,</span><br><span class="line">        document.getElementsByTagName("HEAD")[0].appendChild(scriptTag)</span><br><span class="line">    &#125;,</span><br><span class="line">    evalCall: function(a) &#123;</span><br><span class="line">        return function(b) &#123;</span><br><span class="line">            ready(function() &#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    a(b), </span><br><span class="line"><span class="deletion">-                      // 此处为修改的逻辑</span></span><br><span class="line"><span class="deletion">-                      scriptTag.parentElement.removeChild(scriptTag)</span></span><br><span class="line"><span class="addition">+                      if(scriptTag != null &amp;&amp; scriptTag.parentElement != null)&#123;</span></span><br><span class="line"><span class="addition">+                       scriptTag.parentElement.removeChild(scriptTag)</span></span><br><span class="line"><span class="addition">+                      &#125;</span></span><br><span class="line">                &#125; catch (c) &#123;</span><br><span class="line">                    bszTag.hides()</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">bszCaller.fetch("//busuanzi.ibruce.info/busuanzi?jsonpCallback=BusuanziCallback", function(a) &#123;</span><br><span class="line">    bszTag.texts(a),</span><br><span class="line">    bszTag.shows()</span><br><span class="line">&#125;),</span><br><span class="line">bszTag = &#123;</span><br><span class="line">    bszs: ["site_pv", "page_pv", "site_uv"],</span><br><span class="line">    texts: function(a) &#123;</span><br><span class="line">        this.bszs.map(function(b) &#123;</span><br><span class="line">            var c = document.getElementById("busuanzi_value_" + b);</span><br><span class="line">            c &amp;&amp; (c.innerHTML = a[b])</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    hides: function() &#123;</span><br><span class="line">        this.bszs.map(function(a) &#123;</span><br><span class="line">            var b = document.getElementById("busuanzi_container_" + a);</span><br><span class="line">            b &amp;&amp; (b.style.display = "none")</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    shows: function() &#123;</span><br><span class="line">        this.bszs.map(function(a) &#123;</span><br><span class="line">            var b = document.getElementById("busuanzi_container_" + a);</span><br><span class="line">            b &amp;&amp; (b.style.display = "inline")</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="5-官方群！！！"><a href="#5-官方群！！！" class="headerlink" title="5.官方群！！！"></a>5.官方群！！！</h3><p>群号：419260983，有其余问题进群讨论，<strong>提问时遇到其他的问题请同时发出问题的在线网址！！！</strong></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;不蒜子统计官网：&lt;a href=&quot;http://busuanzi.ibruce.info/&quot;&gt;http://busuanzi.ibruce.info/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;详细使用教程：&lt;a href=&quot;http://ibruce.info/2015/04/04/busuanzi/&quot;&gt;http://ibruce.info/2015/04/04/busuanzi/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;目前支持的功能：（两行代码，搞定计数；方便、简洁、实用）&lt;/p&gt;
&lt;p&gt;a、显示站点总访问量&lt;/p&gt;
&lt;p&gt;b、显示单页面访问量&lt;/p&gt;
    
    </summary>
    
    
      <category term="工具教程" scheme="https://xmgeek.github.io/categories/%E5%B7%A5%E5%85%B7%E6%95%99%E7%A8%8B/"/>
    
      <category term="博客统计插件" scheme="https://xmgeek.github.io/categories/%E5%B7%A5%E5%85%B7%E6%95%99%E7%A8%8B/%E5%8D%9A%E5%AE%A2%E7%BB%9F%E8%AE%A1%E6%8F%92%E4%BB%B6/"/>
    
    
      <category term="博客统计插件" scheme="https://xmgeek.github.io/tags/%E5%8D%9A%E5%AE%A2%E7%BB%9F%E8%AE%A1%E6%8F%92%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>github Issue 作为博客微型数据库的应用</title>
    <link href="https://xmgeek.github.io/posts/e7fe3cc/"/>
    <id>https://xmgeek.github.io/posts/e7fe3cc/</id>
    <published>2019-11-28T14:02:05.000Z</published>
    <updated>2020-06-11T15:48:12.157Z</updated>
    
    <content type="html"><![CDATA[<h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><p>众所周知，对于hexo框架搭建的静态博客，难免会产生一些动态的数据，比如一些碎碎念、友链、音乐、时间轴等微型数据。目前一般的做法:</p><p>a.是创建一个json数据，来存储这些微型数据，但是如果数据太多的话，一是比较慢，二是有个硬伤问题，就是json数据不能分页请求，只能一次拿完，太多的话网络带宽占用太多。</p><a id="more"></a><p>b.或者有的直接后台写一些接口服务啥的，还得在买个服务器部署上去，然后博客中访问接口。</p><p>c.或者有些可能就直接写到html中。</p><p>对于a、c方法都比较麻烦，每次更新了都要编译部署，不能很方便的动态更新。对于b的话，成本以及技术要求可能就更多一些了。</p><p>基于上面出现的问题，目前想到的一个解决方案就是，利用github 的issue作为一个微型数据库。能够很方便的动态更新，也能分页，也不需要啥json文件，想想都很方便。</p><h3 id="issue数据库使用步骤"><a href="#issue数据库使用步骤" class="headerlink" title="issue数据库使用步骤"></a>issue数据库使用步骤</h3><h4 id="issue的创建"><a href="#issue的创建" class="headerlink" title="issue的创建"></a>issue的创建</h4><p>先创建一个Repository，对于此Repository可以专门作为微型的数据库，取名issue_database。创建好之后建立一些issue</p><p>如下所示</p><p><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191128213154.png" alt=""></p><p>目前博客中，所有的动态数据都放到issue中了。</p><h4 id="issue中存储数据"><a href="#issue中存储数据" class="headerlink" title="issue中存储数据"></a>issue中存储数据</h4><p>对于创建好的issue，就可以往里面写数据了，比如我的友链数据为issue：blog_friends</p><p><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191128213427.png" alt=""></p><p>对于issue中存储的数据最好存json格式的，因为可以方便后面取出来使用。存储好数据后，如果太多的话，可以点击hide,隐藏起来。同时这个issue最好给<code>Lock conversation</code>这样的好处是，防止别人往里面加些脏数据，只能自己往里写数据。哈哈，一般也没有闲的无聊的网友恶作剧。这样就存储好数据了。</p><h4 id="博客中获取issue数据"><a href="#博客中获取issue数据" class="headerlink" title="博客中获取issue数据"></a>博客中获取issue数据</h4><p>博客中通过js获取issue中的数据，以博客友链为例，以下是获取代码，以及处理</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// author by removef</span></span><br><span class="line"><span class="comment">// https://removeif.github.io/</span></span><br><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">//获取处理友链数据，来自issue，一次取完</span></span><br><span class="line">    $.getJSON(<span class="string">"https://api.github.com/repos/removeif/issue_database/issues/2/comments?per_page=100&amp;client_id=46a9f3481b46ea0129d8&amp;client_secret=79c7c9cb847e141757d7864453bcbf89f0655b24"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">source</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> data = [];</span><br><span class="line">        <span class="keyword">var</span> source1;</span><br><span class="line">        source1 = source;</span><br><span class="line">      <span class="comment">// 以后每次更新的都在后面，此处倒序，按时间降序排</span></span><br><span class="line">        source1.reverse();</span><br><span class="line">      <span class="comment">// 把所有的数据放到data的列表中</span></span><br><span class="line">        $.each(source1, <span class="function"><span class="keyword">function</span> (<span class="params">i, e</span>) </span>&#123;</span><br><span class="line">            data.push(...JSON.parse(e.body));</span><br><span class="line">        &#125;);</span><br><span class="line">      </span><br><span class="line">        $.each(data, <span class="function"><span class="keyword">function</span> (<span class="params">i, e</span>) </span>&#123;</span><br><span class="line">          <span class="comment">// 博客中html文件的构建，渲染</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>上面代码中client_id、client_secret在另一篇文章中<strong><a href="https://removeif.github.io/2019/09/19/%E5%8D%9A%E5%AE%A2%E6%BA%90%E7%A0%81%E5%88%86%E4%BA%AB.html">博客源码分享</a></strong>有详细的说明,可以查看一下。这样就能获取到相应的数据，进行操作。</p><h4 id="issue数据的更新"><a href="#issue数据的更新" class="headerlink" title="issue数据的更新"></a>issue数据的更新</h4><p>比如想更新任意一项数据都可以进github中对应的仓库的issue下进行更新，添加。然后实时去博客中查看。</p><h3 id="扩展一下"><a href="#扩展一下" class="headerlink" title="扩展一下"></a>扩展一下</h3><p>对于有些爱唠叨的人（比如我），弄个类似碎碎念的东西就比较实用了。之前想过各种方案，存json数据太不方便；后台写个服务部署服务器也太麻烦。最后思来想去还是利用了下现成的优秀项目<a href="https://github.com/gitalk/gitalk">gitalk</a>,稍稍改改就能很好使用。</p><h4 id="博客中的碎碎念"><a href="#博客中的碎碎念" class="headerlink" title="博客中的碎碎念"></a>博客中的碎碎念</h4><p>对于博主而言，有发表框和修改的操作，能够方便发表和修改。</p><p><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191128215148.png" alt=""></p><p>可能有时候还会发表一些图片，对图片的样式做了一些控制</p><p><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191128215345.png" alt=""></p><p>对于网友的话只能查看以及点赞加❤️</p><p><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191128215555.png" alt=""></p><p>做法就是源码中改下返回html的文件内容，如果是管理员和非管理员返回一些不同的元素，能够很好的实现碎碎念的功能。<br>查看<a href="https://removeif.github.io/self-talking/">碎碎念</a>。</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>静态博客的动态数据是个痛点，GitHub Issue有很多可利用的地方。多去探索发掘其中的奥妙。</p><p>利用GitHub Issue来解决目前也是一种解决方法。希望后面会出现更好的解决方案。</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h3&gt;&lt;p&gt;众所周知，对于hexo框架搭建的静态博客，难免会产生一些动态的数据，比如一些碎碎念、友链、音乐、时间轴等微型数据。目前一般的做法:&lt;/p&gt;
&lt;p&gt;a.是创建一个json数据，来存储这些微型数据，但是如果数据太多的话，一是比较慢，二是有个硬伤问题，就是json数据不能分页请求，只能一次拿完，太多的话网络带宽占用太多。&lt;/p&gt;
    
    </summary>
    
    
      <category term="工具教程" scheme="https://xmgeek.github.io/categories/%E5%B7%A5%E5%85%B7%E6%95%99%E7%A8%8B/"/>
    
      <category term="主题工具" scheme="https://xmgeek.github.io/categories/%E5%B7%A5%E5%85%B7%E6%95%99%E7%A8%8B/%E4%B8%BB%E9%A2%98%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="工具教程" scheme="https://xmgeek.github.io/tags/%E5%B7%A5%E5%85%B7%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>github page网站cdn优化加速</title>
    <link href="https://xmgeek.github.io/posts/346ce02e/"/>
    <id>https://xmgeek.github.io/posts/346ce02e/</id>
    <published>2019-09-25T08:41:46.000Z</published>
    <updated>2020-06-11T15:48:12.157Z</updated>
    
    <content type="html"><![CDATA[<p>CDN的全称是Content Delivery Network，即内容分发网络。CDN是构建在网络之上的内容分发网络，依靠部署在各地的边缘服务器，通过中心平台的负载均衡、内容分发、调度等功能模块，使用户就近获取所需内容，降低网络拥塞，提高用户访问响应速度和命中率。CDN的关键技术主要有内容存储和分发技术。——百度百科</p><p>放在Github的资源在国内加载速度比较慢，因此需要使用CDN加速来优化网站打开速度，jsDelivr + Github便是免费且好用的CDN，非常适合博客网站使用。</p><a id="more"></a><h3 id="图片加速"><a href="#图片加速" class="headerlink" title="图片加速"></a>图片加速</h3><p>关于图传以及GitHub作为图库的使用方法请参考文章：<a href="https://removeif.github.io/2019/06/20/博客图片上传picgo工具github图传使用.html">博客图片上传picgo工具github图传使用</a>。</p><p>在上面参考文章的基础之上只需要修改以下配置：<strong>（指定相关cdn域名）</strong></p><p><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20190925161709.png" alt=""></p><p>原来项目中使用了原来的方式，进行全局替换，<strong>Mac idea</strong>直接快捷键<code>command+shift+R</code>全局替换</p><p><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20190925162235.png" alt=""></p><p><strong>【ps：题外话】</strong>原来是统一用的GitHub的仓库中的图片，通过这样替换，可以看到图片统一管理是多么的重要，多么的方便管理操作。</p><p>至此，博客中的相关图片都加上了cdn。</p><h3 id="其余资源文件"><a href="#其余资源文件" class="headerlink" title="其余资源文件"></a>其余资源文件</h3><p>用法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;你的用户名&#x2F;你的仓库名@发布的版本号&#x2F;文件路径</span><br></pre></td></tr></table></figure><p>例如：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;TRHX&#x2F;CDN-for-itrhx.com@1.0&#x2F;images&#x2F;trhx.png</span><br><span class="line">https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;TRHX&#x2F;CDN-for-itrhx.com@2.0.1&#x2F;css&#x2F;style.css</span><br><span class="line">https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;moezx&#x2F;cdn@3.1.3&#x2F;&#x2F;The%20Pet%20Girl%20of%20Sakurasou.mp4</span><br></pre></td></tr></table></figure><p>注意：版本号不是必需的，是为了区分新旧资源，如果不使用版本号，将会直接引用最新资源，除此之外还可以使用某个范围内的版本，查看所有资源等，具体使用方法如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 加载任何Github发布、提交或分支</span><br><span class="line">https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;user&#x2F;repo@version&#x2F;file</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 加载 jQuery v3.2.1</span><br><span class="line">https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;jquery&#x2F;jquery@3.2.1&#x2F;dist&#x2F;jquery.min.js</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 使用版本范围而不是特定版本</span><br><span class="line">https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;jquery&#x2F;jquery@3.2&#x2F;dist&#x2F;jquery.min.js</span><br><span class="line">https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;jquery&#x2F;jquery@3&#x2F;dist&#x2F;jquery.min.js</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 完全省略该版本以获取最新版本</span><br><span class="line">https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;jquery&#x2F;jquery&#x2F;dist&#x2F;jquery.min.js</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 将“.min”添加到任何JS&#x2F;CSS文件中以获取缩小版本，如果不存在，将为会自动生成</span><br><span class="line">https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;jquery&#x2F;jquery@3.2.1&#x2F;src&#x2F;core.min.js</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 在末尾添加 &#x2F; 以获取资源目录列表</span><br><span class="line">https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;jquery&#x2F;jquery&#x2F;</span><br></pre></td></tr></table></figure><p>至此，github page 博客基本需要加速的完成。</p><p>参考文章:<br><a href="https://blog.csdn.net/qq_36759224/article/details/86936453">参考链接1</a><br><a href="https://blog.csdn.net/qq_36759224/article/details/98058240">参考链接2</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;CDN的全称是Content Delivery Network，即内容分发网络。CDN是构建在网络之上的内容分发网络，依靠部署在各地的边缘服务器，通过中心平台的负载均衡、内容分发、调度等功能模块，使用户就近获取所需内容，降低网络拥塞，提高用户访问响应速度和命中率。CDN的关键技术主要有内容存储和分发技术。——百度百科&lt;/p&gt;
&lt;p&gt;放在Github的资源在国内加载速度比较慢，因此需要使用CDN加速来优化网站打开速度，jsDelivr + Github便是免费且好用的CDN，非常适合博客网站使用。&lt;/p&gt;
    
    </summary>
    
    
      <category term="工具教程" scheme="https://xmgeek.github.io/categories/%E5%B7%A5%E5%85%B7%E6%95%99%E7%A8%8B/"/>
    
      <category term="主题工具" scheme="https://xmgeek.github.io/categories/%E5%B7%A5%E5%85%B7%E6%95%99%E7%A8%8B/%E4%B8%BB%E9%A2%98%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="工具教程" scheme="https://xmgeek.github.io/tags/%E5%B7%A5%E5%85%B7%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>博客源码分享</title>
    <link href="https://xmgeek.github.io/posts/1a54ada2/"/>
    <id>https://xmgeek.github.io/posts/1a54ada2/</id>
    <published>2019-09-19T14:10:43.000Z</published>
    <updated>2020-06-11T15:48:12.158Z</updated>
    
    <content type="html"><![CDATA[<h3 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h3><blockquote><p>博客源码包括两个主题<a href="http://github.com/ppoffice/hexo-theme-icarus">icarus</a>和<a href="https://github.com/iissnan/hexo-theme-next">next</a>，在主题基础之上参照各网友博客，以及自己的一些想法做出的一些修改以及增加部分新元素。  以下是修改后的需要的部分配置，其余的配置参照<a href="http://github.com/ppoffice/hexo-theme-icarus">icarus主题配置</a>和<a href="https://github.com/iissnan/hexo-theme-next">next主题配置</a>。<br>因为修改了原作者源码，有什么问题请先联系我，不要去麻烦原作者了，能自己解决的问题就不要麻烦别人了，每个人的时间都很宝贵。<br>膜拜和感谢所有模块的原作者,orz👻,辛苦了。  </p></blockquote><p>欢迎围观：<a href="https://github.com/removeif/hexo-theme-icarus-removeif.git">博客+主题源码</a>、<a href="https://github.com/removeif/hexo-theme-amazing.git">纯主题源码</a>、<a href="https://removeif.github.io/">博主博客</a></p><a id="more"></a><h3 id="一、icarus主题之上主要改动"><a href="#一、icarus主题之上主要改动" class="headerlink" title="一、icarus主题之上主要改动"></a>一、icarus主题之上主要改动</h3><ul><li>新增gitalk最新评论widget</li><li>首页增加热门推荐</li><li>增加弹性配置影音（可加音乐、视频）模块</li><li>丰富弹性配置about页面</li><li>新增弹性配置友链模块</li><li>整体布局左右拉伸了一点，紧凑一些</li><li>文章页双栏模式、固定导航栏</li><li>引入可配置看板娘</li><li>归档页加入了一个文章贡献概览</li><li>置顶文章的设置</li><li>文章列表评论数显示</li><li>文章中推荐文章模块配置 </li><li>增加深色主题切换</li><li>加入加密文章</li><li>碎碎念功能</li><li>透明无界样式</li><li>简化部分widget数据，加入<code>查看全部</code>按钮</li><li>gitalk评论增加评论开关，评论列表中标记博主</li><li>还有什么新的，好的feature欢迎大家随时提出来，有能力有时间就做出来</li></ul><h3 id="二、部分配置说明："><a href="#二、部分配置说明：" class="headerlink" title="二、部分配置说明："></a>二、部分配置说明：</h3><h4 id="本机环境："><a href="#本机环境：" class="headerlink" title="本机环境："></a>本机环境：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">192:hexo-theme-icarus-removeif xx$ node -v</span><br><span class="line">v11.1.0</span><br><span class="line">192:hexo-theme-icarus-removeif xx$ npm -v</span><br><span class="line">6.4.1</span><br><span class="line">&#96;&#96;&#96;  </span><br><span class="line">#### 克隆博客代码到本地</span><br><span class="line">&#96;&#96;&#96;jshelllanguage</span><br><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;removeif&#x2F;hexo-theme-icarus-removeif.git</span><br></pre></td></tr></table></figure><h4 id="开始部分配置："><a href="#开始部分配置：" class="headerlink" title="开始部分配置："></a>开始部分配置：</h4><p><strong>敲黑板！！！！首先全局以及主题中的<code>_config.yml</code>配置成自己的对应参数。</strong></p><h4 id="1-热门推荐，最新评论："><a href="#1-热门推荐，最新评论：" class="headerlink" title="1.热门推荐，最新评论："></a>1.热门推荐，最新评论：</h4><p><strong>仅针对gitalk评论有效，如果配置完后显示<a href="https://removeif.github.io/">本博客</a>相关评论、推荐，请详细阅读这一条</strong><br>热门推荐，最新评论，文章评论数关联的js文件路径：themes/icarus/source/js/comment-issue-data.js<br>以下引号里的地址改成自己对应的博客评论的issues的仓库相关的值。repoIssuesUrl改两个值（removeif和blog_comment改成自己对应的）</p><figure class="highlight yaml"><figcaption><span>themes/icarus/source/js/comment-issue-data.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">//</span> <span class="string">评论issues仓库</span> <span class="string">by.removeif</span> <span class="string">https://removeif.github.io/</span></span><br><span class="line"><span class="string">var</span> <span class="string">repoIssuesUrl</span> <span class="string">=</span> <span class="string">"https://api.github.com/repos/removeif/blog_comment/issues"</span><span class="string">;</span> <span class="string">//</span> <span class="string">removeif：用户名，blog_comment：评论的issue仓库</span></span><br><span class="line"><span class="string">//</span> <span class="string">评论issues仓库</span> <span class="string">clientId、clientSecret怎么申请自行搜索，关于这暴露两个参数的安全问题，查看</span> <span class="string">https://removeif.github.io/2019/09/19/博客源码分享.html#1-热门推荐，最新评论：</span></span><br><span class="line"><span class="string">var</span> <span class="string">clientId</span> <span class="string">=</span> <span class="string">"46a9f3481b46ea0129d8"</span><span class="string">;</span></span><br><span class="line"><span class="string">var</span> <span class="string">clientSecret</span> <span class="string">=</span> <span class="string">"79c7c9cb847e141757d7864453bcbf89f0655b24"</span><span class="string">;</span></span><br></pre></td></tr></table></figure><p>github api 详情可以参照<a href="https://developer.github.com/v3/#rate-limiting">官方api说明</a><br>关于配置暴露client_id和client_secret安全性问题，gitalk作者有<a href="https://github.com/gitalk/gitalk/issues/150">解释</a><br>对应主题中的<code>_config.yml</code>要开启如下配置，xxx换成自己的，否则无效。</p><figure class="highlight yaml"><figcaption><span>themes/icarus/_config.yml >folded</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">comment:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">gitalk</span></span><br><span class="line">    <span class="attr">owner:</span> <span class="string">xxx</span>         <span class="comment"># (required) GitHub user name</span></span><br><span class="line">    <span class="attr">repo:</span> <span class="string">xxx</span>          <span class="comment"># (required) GitHub repository name</span></span><br><span class="line">    <span class="attr">client_id:</span> <span class="string">xxx</span>     <span class="comment"># (required) OAuth application client id</span></span><br><span class="line">    <span class="attr">client_secret:</span> <span class="string">xxx</span> <span class="comment"># (required) OAuth application client secret</span></span><br><span class="line">    <span class="attr">admin:</span> <span class="string">xxx</span>  <span class="comment">#此账户一般为用户名 GitHub user name 文章中能创建issue需要此用户登录才可以，点了创建issue后刷新一遍才能看到！！！！</span></span><br><span class="line">    <span class="attr">create_issue_manually:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">distraction_free_mode:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">has_hot_recommend:</span> <span class="literal">true</span> <span class="comment"># 是否有热门推荐</span></span><br><span class="line">    <span class="attr">has_latest_comment:</span> <span class="literal">true</span> <span class="comment">#是否有最新评论</span></span><br></pre></td></tr></table></figure><p>说明：</p><ul><li><code>has_hot_recommend: true</code> 是否开启首页热评，false-不开启，true-开启</li><li><code>has_latest_comment: true</code> 是否开启最新评论，false-不开启，true-开启</li><li>热门推荐数据为评论数最多的文章，🔥后面的数字：根据文章的评论数*101 。  </li><li>最新评论：为该仓库下，所有issue中的最新评论。  </li><li>目前的最新评论有1分钟的本地缓存，评论后可能1分钟后才能看见最新评论，出于性能优化，每次请求接口处理还是挺耗时，comment-issue-data.js中可以自己去掉。  </li></ul><h4 id="2-友链数据文件："><a href="#2-友链数据文件：" class="headerlink" title="2.友链数据文件："></a>2.友链数据文件：</h4><p>文件路径：themes/icarus/source/js/friend.js<br>相应格式增加自己需要的数据。</p><h4 id="3-影音数据文件："><a href="#3-影音数据文件：" class="headerlink" title="3.影音数据文件："></a>3.影音数据文件：</h4><p>文件路径：<br>音乐：themes/icarus/source/json_data/music.json<br>视频：themes/icarus/source/json_data/video.json<br>相应格式增加自己需要的数据。    </p><h4 id="4-关于页面时间轴记录数据文件："><a href="#4-关于页面时间轴记录数据文件：" class="headerlink" title="4.关于页面时间轴记录数据文件："></a>4.关于页面时间轴记录数据文件：</h4><p>文件路径：themes/icarus/source/json_data/record.json<br>相应格式增加自己需要的数据。</p><h4 id="5-看板娘配置"><a href="#5-看板娘配置" class="headerlink" title="5.看板娘配置"></a>5.看板娘配置</h4><p>主题中的<code>_config.yml</code>配置如下设置</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">live2Dswitch: off #live2D开关 on为打开,off为关闭</span><br></pre></td></tr></table></figure><h4 id="6-置顶设置："><a href="#6-置顶设置：" class="headerlink" title="6.置顶设置："></a>6.置顶设置：</h4><p>.md文章头部数据中加入top值，top值越大越靠前，大于0显示置顶图标。<br>修改依赖包中文件removeif/node_modules/hexo-generator-index/lib/generator.js如下：</p><figure class="highlight js"><figcaption><span>node_modules/hexo-generator-index/lib/generator.js >folded</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"><span class="keyword">const</span> pagination = <span class="built_in">require</span>(<span class="string">'hexo-pagination'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">locals</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> config = <span class="keyword">this</span>.config;</span><br><span class="line">    <span class="keyword">var</span> posts = locals.posts;</span><br><span class="line">    posts.data = posts.data.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(a.top == <span class="literal">undefined</span>)&#123;</span><br><span class="line">            a.top = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(b.top == <span class="literal">undefined</span>)&#123;</span><br><span class="line">            b.top = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(a.top == b.top)&#123;</span><br><span class="line">            <span class="keyword">return</span> b.date - a.date;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">           <span class="keyword">return</span> b.top - a.top;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">var</span> paginationDir = config.pagination_dir || <span class="string">'page'</span>;</span><br><span class="line">    <span class="keyword">return</span> pagination(<span class="string">''</span>, posts, &#123;</span><br><span class="line">        perPage: config.index_generator.per_page,</span><br><span class="line">        layout: [<span class="string">'index'</span>, <span class="string">'archive'</span>],</span><br><span class="line">        format: paginationDir + <span class="string">'/%d/'</span>,</span><br><span class="line">        data: &#123;</span><br><span class="line">            __index: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="7-配置文章中推荐文章模块"><a href="#7-配置文章中推荐文章模块" class="headerlink" title="7.配置文章中推荐文章模块"></a>7.配置文章中推荐文章模块</h4><p>根据配置的recommend值（必须大于0），值越大越靠前，相等取最新的，最多取5条。recommend（6.中top值也在下面示例）配置在.md文章头中，如下  </p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">title:</span> <span class="string">博客源码分享</span></span><br><span class="line"><span class="attr">top:</span> <span class="number">1</span></span><br><span class="line"><span class="attr">toc:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">recommend:</span> <span class="number">1</span> </span><br><span class="line"><span class="attr">keywords:</span> <span class="string">categories-github</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2019</span><span class="number">-09</span><span class="number">-19</span> <span class="number">22</span><span class="string">:10:43</span></span><br><span class="line"><span class="attr">thumbnail:</span> <span class="string">https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20190919221611.png</span></span><br><span class="line"><span class="attr">tags:</span> <span class="string">工具教程</span></span><br><span class="line"><span class="attr">categories:</span> <span class="string">[工具教程,主题工具]</span></span><br></pre></td></tr></table></figure><h4 id="8-文章中某个代码块折叠的方法"><a href="#8-文章中某个代码块折叠的方法" class="headerlink" title="8.文章中某个代码块折叠的方法"></a>8.文章中某个代码块折叠的方法</h4><p>代码块头部加入标记 <code>&gt;folded</code>，如下代码块中使用。</p><figure class="highlight java"><figcaption><span>main.java >folded</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用示例，.md 文件中头行标记"&gt;folded"</span></span><br><span class="line"><span class="comment">// ```java main.java &gt;folded</span></span><br><span class="line"><span class="comment">// import main.java</span></span><br><span class="line"><span class="comment">// private static void main()&#123;</span></span><br><span class="line"><span class="comment">//     // test</span></span><br><span class="line"><span class="comment">//     int i = 0;</span></span><br><span class="line"><span class="comment">//     return i;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// \\```</span></span><br></pre></td></tr></table></figure><h4 id="9-加入加密文章"><a href="#9-加入加密文章" class="headerlink" title="9.加入加密文章"></a>9.加入加密文章</h4><p>如下需要加密的文章头部加入以下代码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 2019成长记01</span><br><span class="line">top: -1</span><br><span class="line">toc: true</span><br><span class="line">keywords: categories-java</span><br><span class="line"></span><br><span class="line">#以下为文章加密信息</span><br><span class="line">encrypt: true</span><br><span class="line">password: 123456 #此处为文章密码</span><br><span class="line">abstract: 咦，这是一篇加密文章，好像需要输入密码才能查看呢！</span><br><span class="line">message: 嗨，请准确无误地输入密码查看哟！</span><br><span class="line">wrong_pass_message: 不好意思，密码没对哦，在检查检查呢！</span><br><span class="line">wrong_hash_message: 不好意思，信息无法验证！</span><br><span class="line">---</span><br></pre></td></tr></table></figure><p>注：<strong>加密文章不会出现在最新文章列表widget中，也不会出现在文章中推荐列表中，首页列表中需要设置top: -1 让它排在最后比较合理一些。</strong></p><h4 id="10-碎碎念的使用"><a href="#10-碎碎念的使用" class="headerlink" title="10.碎碎念的使用"></a>10.碎碎念的使用</h4><p>在github中，创建碎碎念issue，并且打上对应的label（<code>eg:666666</code>）对应配置中为id，填写到source/self-talking/index.md文件中如下对应位置，其余配置也要改成自己的，如clientID等。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">var</span> gitalk = <span class="keyword">new</span> Gitalk(&#123;</span><br><span class="line">        clientID: <span class="string">'46a9f3481b46ea0129d8'</span>,</span><br><span class="line">        clientSecret: <span class="string">'79c7c9cb847e141757d7864453bcbf89f0655b24'</span>,</span><br><span class="line">        id: <span class="string">'666666'</span>,</span><br><span class="line">        repo: <span class="string">'issue_database'</span>,</span><br><span class="line">        owner: <span class="string">'removeif'</span>,</span><br><span class="line">        admin: <span class="string">"removeif"</span>,</span><br><span class="line">        createIssueManually: <span class="literal">true</span>,</span><br><span class="line">        distractionFreeMode: <span class="literal">false</span></span><br><span class="line">    &#125;)</span><br><span class="line">    gitalk.render(<span class="string">'comment-container1'</span>)</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><p>如下：<br><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2020/20200119181607.png" alt="碎碎念"></p><h4 id="11-本博客样式（透明无界）"><a href="#11-本博客样式（透明无界）" class="headerlink" title="11.本博客样式（透明无界）"></a>11.本博客样式（透明无界）</h4><p>只需要放开themes/icarus/source/css/base.styl文件中以下样式代码注释即可，默认是注释的没启用</p><figure class="highlight"><figcaption><span>base.styl >folded</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">//=================本博客使用样式   start</span><br><span class="line"></span><br><span class="line">// 首页去图</span><br><span class="line"><span class="selector-class">.body_hot_comment</span> <span class="selector-class">.comment-content</span> <span class="selector-class">.card-comment-item</span> <span class="selector-class">.ava</span>, <span class="selector-class">.media-left</span>, <span class="selector-class">.is-6-widescreen</span> <span class="selector-class">.card-image</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">hover-color = #deeafb;</span><br><span class="line">// 去card</span><br><span class="line"><span class="selector-class">.card</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: unset;</span><br><span class="line">    //box-shadow: unset;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.navbar</span>, <span class="selector-tag">footer</span><span class="selector-class">.footer</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: unset;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span><span class="selector-pseudo">:not(.night)</span> <span class="selector-class">.navbar</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-tag">body</span><span class="selector-pseudo">:not(.night)</span> <span class="selector-class">.footer</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-tag">body</span><span class="selector-pseudo">:not(.night)</span> <span class="selector-class">.card</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-tag">body</span><span class="selector-pseudo">:not(.night)</span> <span class="selector-class">.pagination</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-tag">body</span><span class="selector-pseudo">:not(.night)</span> <span class="selector-class">.post-navigation</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">    <span class="attribute">background-color</span>: hover-color;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">10px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.05</span>),<span class="number">0</span> <span class="number">0</span> <span class="number">1px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.pagination</span>, <span class="selector-class">.post-navigation</span>&#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.pagination</span> <span class="selector-class">.pagination-link</span><span class="selector-pseudo">:not(.is-current)</span>, <span class="selector-class">.pagination</span> <span class="selector-class">.pagination-previous</span>, <span class="selector-class">.pagination</span> <span class="selector-class">.pagination-next</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>:<span class="built_in">rgba</span>(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.timeline</span> <span class="selector-class">.media</span><span class="selector-pseudo">:last-child</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: unset;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.footer</span> &#123;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0px</span> <span class="number">4px</span> <span class="number">10px</span> <span class="number">10px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.05</span>);</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">3rem</span> <span class="number">1.5rem</span> <span class="number">2rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width:</span> <span class="number">1087px</span>)</span><br><span class="line">    .navbar-menu &#123;</span><br><span class="line">        <span class="selector-tag">background-color</span>: <span class="selector-tag">unset</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">//=================本博客使用样式   end</span><br></pre></td></tr></table></figure><p>如下：<br><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2020/20200218084713.png" alt="无界样式"></p><h4 id="精简部分widget数据"><a href="#精简部分widget数据" class="headerlink" title="精简部分widget数据"></a>精简部分widget数据</h4><p>widget中的归档和分类和标签精简了，数据多时很丑，改为了分别展示5条和10条和20条，增加了查看全部。<br><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2020/20200119181201.png" alt="查看全部"></p><h4 id="gitalk评论增加评论开关，评论列表中标记博主"><a href="#gitalk评论增加评论开关，评论列表中标记博主" class="headerlink" title="gitalk评论增加评论开关，评论列表中标记博主"></a>gitalk评论增加评论开关，评论列表中标记博主</h4><p>需要关闭评论的在文章头部加入 <code>comments: false</code>,原来已经评论的依然会显示，如下<br><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2020/20200218084943.png" alt=""></p><p>原来已有博客文章的迁移，只需要把原来对应的文章放到source/_posts里即可。然后去对应文章下面创建评论issue。  </p><h4 id="以上配置好后"><a href="#以上配置好后" class="headerlink" title="以上配置好后"></a>以上配置好后</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">$</span> <span class="string">npm</span> <span class="string">install</span> <span class="comment">#安装依赖包（只需要执行一次）ps:如果是纯主题仓库，可直接把本文最后的json文件复制到博客下面的依赖文件package.json后在执行此命令</span></span><br><span class="line"><span class="string">$</span> <span class="string">hexo</span> <span class="string">clean</span> <span class="comment">#清除缓存</span></span><br><span class="line"><span class="string">$</span> <span class="string">hexo</span> <span class="string">g</span> <span class="comment">#编译 </span></span><br><span class="line"><span class="string">$</span> <span class="string">hexo</span> <span class="string">s</span> <span class="comment">#启动服务 </span></span><br><span class="line"><span class="string">$</span> <span class="string">hexo</span> <span class="string">d</span> <span class="comment">#推到远程</span></span><br></pre></td></tr></table></figure><p>安装依赖包（只需要执行一次），以后修改了代码 只需要执行后面几条就好。  </p><p>ok,enjoy it!！👏👏</p><p>有什么问题，欢迎issue里讨论。</p><h3 id="写在后面"><a href="#写在后面" class="headerlink" title="写在后面"></a>写在后面</h3><p>如果你有问题请反馈: <a href="https://github.com/removeif/hexo-theme-icarus-removeif/issues">issues</a> （请务必先于issues中寻找答案）<br>如果你喜欢该主题: <a href="https://github.com/removeif/hexo-theme-icarus-removeif">star</a><br>如果你想定制主题: <a href="https://github.com/removeif/hexo-theme-icarus-removeif">fork</a> </p><h3 id="文章中横竖图demo；对于横竖图推荐分开使用，且长宽一致的，如统一手机拍照、电脑截图"><a href="#文章中横竖图demo；对于横竖图推荐分开使用，且长宽一致的，如统一手机拍照、电脑截图" class="headerlink" title="文章中横竖图demo；对于横竖图推荐分开使用，且长宽一致的，如统一手机拍照、电脑截图"></a>文章中横竖图demo；对于横竖图推荐分开使用，且长宽一致的，如统一手机拍照、电脑截图</h3><p>使用方法：md文章中放入以下代码</p><figure class="highlight html"><figcaption><span>index.html>folded</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">+ 横竖图</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"justified-gallery"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">![张芷溪](http://wx1.sinaimg.cn/large/b5d1b710ly1g6bz7n92s7j212w0nr1kx.jpg) ![李一桐](http://wx2.sinaimg.cn/mw1024/005RAHfgly1fvfc4f19qfj33402c0qv9.jpg) ![gakki](http://wx1.sinaimg.cn/mw1024/70396e5agy1g5qe457i6yj21660ogtap.jpg) ![李一桐](http://wx1.sinaimg.cn/mw1024/005RAHfgly1fuzz17s2q3j32e43cku0x.jpg) ![彭小苒](http://wx1.sinaimg.cn/mw1024/d79c9b94ly1g1pb1uthr5j21f02iox6t.jpg)<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">+ 横图4</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"img-x"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">![v4](https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191022182226.png) ![v3](https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191018114126.png) ![v4](https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191022182226.png) ![v3](https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191018114126.png)<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">+ 竖图5</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"img-y"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">![电池](https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191024145940.jpg) ![打王者荣耀](https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191024141906.jpg) ![支付宝付款](https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191024141926.jpg) ![锤子便签](https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191024145956.jpg) ![电池](https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191024145940.jpg)<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="效果如下（多图左右拉查看）"><a href="#效果如下（多图左右拉查看）" class="headerlink" title="效果如下（多图左右拉查看）"></a>效果如下（多图左右拉查看）</h4><ul><li>横竖图</li></ul><div class="justified-gallery"><p><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191128222602.jpg" alt="李庚希"> <img src="http://wx4.sinaimg.cn/mw1024/d79c9b94ly1g0pmoa18rkj23wm2lrb2e.jpg" alt="彭小苒"> <img src="http://wx1.sinaimg.cn/mw1024/d79c9b94ly1g1pb1uthr5j21f02iox6t.jpg" alt="彭小苒"> <img src="http://wx3.sinaimg.cn/mw1024/63112839gy1g423ovlwzaj234022ou0y.jpg" alt="唐艺昕"> <img src="http://wx3.sinaimg.cn/mw1024/0068cFqEgy1g5v23wwjwdj30sg0ld0vo.jpg" alt="张芷溪"> <img src="http://wx3.sinaimg.cn/mw1024/005RAHfgly1g2jhakgz41j31sc2dsx6u.jpg" alt="李一桐"> <img src="http://wx4.sinaimg.cn/large/70396e5agy1fml9habgdcg20p00hd7wz.gif" alt="gakki"></div></p><ul><li>横图4</li></ul><div class="img-x"><p><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191022182226.png" alt="v4"> <img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191018114126.png" alt="v3"> <img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191022182226.png" alt="v4"> <img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191018114126.png" alt="v3"></div></p><ul><li>竖图5</li></ul><div class="img-y"><p><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191024145940.jpg" alt="电池"> <img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191024141906.jpg" alt="打王者荣耀"> <img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191024141926.jpg" alt="支付宝付款"> <img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191024145956.jpg" alt="锤子便签"> <img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191024145940.jpg" alt="电池"></div></p><h3 id="博客快照："><a href="#博客快照：" class="headerlink" title="博客快照："></a>博客快照：</h3><ul><li>主页</li></ul><div class="img-x"><p><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191107231051.png" alt="v5"> <img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191022182226.png" alt="v4"> <img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191018114126.png" alt="v3"> <img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191014183620.png" alt="v2"> <img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20190919221347.png" alt="v1"></div></p><ul><li>深色主题<br><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2020/20200218085241.png" alt=""></li><li>置顶<br><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20190926210437.png" alt=""></li><li>文章评论数<br><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191016133335.png" alt=""></li><li>推荐文章模块<br><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20191107131513.png" alt=""></li><li>归档<br><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2020/20200214190807.png" alt=""></li><li>留言<br><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20190919221820.png" alt=""></li><li>友链<br><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2020/20200218085424.png" alt=""></li><li>美图<br><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20190919221949.png" alt=""></li><li>影音<br><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20190919222030.png" alt=""></li><li>关于<br><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20190919222131.png" alt=""></li></ul><h3 id="提供hexo博客目录下依赖包-package-json"><a href="#提供hexo博客目录下依赖包-package-json" class="headerlink" title="提供hexo博客目录下依赖包 package.json"></a>提供hexo博客目录下依赖包 package.json</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"hexo-site"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"3.0.0"</span>,</span><br><span class="line">  <span class="attr">"private"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"build"</span>: <span class="string">"hexo generate"</span>,</span><br><span class="line">    <span class="attr">"clean"</span>: <span class="string">"hexo clean"</span>,</span><br><span class="line">    <span class="attr">"deploy"</span>: <span class="string">"hexo deploy"</span>,</span><br><span class="line">    <span class="attr">"server"</span>: <span class="string">"hexo server"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"hexo"</span>: &#123;</span><br><span class="line">    <span class="attr">"version"</span>: <span class="string">"4.2.0"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"dependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"ajv"</span>: <span class="string">"^6.10.2"</span>,</span><br><span class="line">    <span class="attr">"bulma-stylus"</span>: <span class="string">"0.8.0"</span>,</span><br><span class="line">    <span class="attr">"deepmerge"</span>: <span class="string">"^4.2.2"</span>,</span><br><span class="line">    <span class="attr">"hexo"</span>: <span class="string">"^4.2.0"</span>,</span><br><span class="line">    <span class="attr">"hexo-blog-encrypt"</span>: <span class="string">"^3.0.3"</span>,</span><br><span class="line">    <span class="attr">"hexo-deployer-git"</span>: <span class="string">"^2.1.0"</span>,</span><br><span class="line">    <span class="attr">"hexo-generator-archive"</span>: <span class="string">"^1.0.0"</span>,</span><br><span class="line">    <span class="attr">"hexo-generator-category"</span>: <span class="string">"^1.0.0"</span>,</span><br><span class="line">    <span class="attr">"hexo-generator-feed"</span>: <span class="string">"^2.2.0"</span>,</span><br><span class="line">    <span class="attr">"hexo-generator-index"</span>: <span class="string">"^1.0.0"</span>,</span><br><span class="line">    <span class="attr">"hexo-generator-tag"</span>: <span class="string">"^1.0.0"</span>,</span><br><span class="line">    <span class="attr">"hexo-log"</span>: <span class="string">"^1.0.0"</span>,</span><br><span class="line">    <span class="attr">"hexo-pagination"</span>: <span class="string">"^1.0.0"</span>,</span><br><span class="line">    <span class="attr">"hexo-renderer-ejs"</span>: <span class="string">"^1.0.0"</span>,</span><br><span class="line">    <span class="attr">"hexo-renderer-inferno"</span>: <span class="string">"^0.1.1"</span>,</span><br><span class="line">    <span class="attr">"hexo-renderer-marked"</span>: <span class="string">"^2.0.0"</span>,</span><br><span class="line">    <span class="attr">"hexo-renderer-stylus"</span>: <span class="string">"^1.1.0"</span>,</span><br><span class="line">    <span class="attr">"hexo-server"</span>: <span class="string">"^1.0.0"</span>,</span><br><span class="line">    <span class="attr">"hexo-util"</span>: <span class="string">"^1.8.0"</span>,</span><br><span class="line">    <span class="attr">"inferno"</span>: <span class="string">"^7.3.3"</span>,</span><br><span class="line">    <span class="attr">"inferno-create-element"</span>: <span class="string">"^7.3.3"</span>,</span><br><span class="line">    <span class="attr">"js-yaml"</span>: <span class="string">"^3.13.1"</span>,</span><br><span class="line">    <span class="attr">"moment"</span>: <span class="string">"^2.22.2"</span>,</span><br><span class="line">    <span class="attr">"save"</span>: <span class="string">"^2.4.0"</span>,</span><br><span class="line">    <span class="attr">"semver"</span>: <span class="string">"&gt;=5.0.0"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;写在前面&quot;&gt;&lt;a href=&quot;#写在前面&quot; class=&quot;headerlink&quot; title=&quot;写在前面&quot;&gt;&lt;/a&gt;写在前面&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;博客源码包括两个主题&lt;a href=&quot;http://github.com/ppoffice/hexo-theme-icarus&quot;&gt;icarus&lt;/a&gt;和&lt;a href=&quot;https://github.com/iissnan/hexo-theme-next&quot;&gt;next&lt;/a&gt;，在主题基础之上参照各网友博客，以及自己的一些想法做出的一些修改以及增加部分新元素。  以下是修改后的需要的部分配置，其余的配置参照&lt;a href=&quot;http://github.com/ppoffice/hexo-theme-icarus&quot;&gt;icarus主题配置&lt;/a&gt;和&lt;a href=&quot;https://github.com/iissnan/hexo-theme-next&quot;&gt;next主题配置&lt;/a&gt;。&lt;br&gt;因为修改了原作者源码，有什么问题请先联系我，不要去麻烦原作者了，能自己解决的问题就不要麻烦别人了，每个人的时间都很宝贵。&lt;br&gt;膜拜和感谢所有模块的原作者,orz👻,辛苦了。  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;欢迎围观：&lt;a href=&quot;https://github.com/removeif/hexo-theme-icarus-removeif.git&quot;&gt;博客+主题源码&lt;/a&gt;、&lt;a href=&quot;https://github.com/removeif/hexo-theme-amazing.git&quot;&gt;纯主题源码&lt;/a&gt;、&lt;a href=&quot;https://removeif.github.io/&quot;&gt;博主博客&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="工具教程" scheme="https://xmgeek.github.io/categories/%E5%B7%A5%E5%85%B7%E6%95%99%E7%A8%8B/"/>
    
      <category term="主题工具" scheme="https://xmgeek.github.io/categories/%E5%B7%A5%E5%85%B7%E6%95%99%E7%A8%8B/%E4%B8%BB%E9%A2%98%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="工具教程" scheme="https://xmgeek.github.io/tags/%E5%B7%A5%E5%85%B7%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>博客中gitalk最新评论的获取</title>
    <link href="https://xmgeek.github.io/posts/47c45f64/"/>
    <id>https://xmgeek.github.io/posts/47c45f64/</id>
    <published>2019-09-12T17:03:06.000Z</published>
    <updated>2020-06-11T15:48:12.157Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>博客中，对于网友的评论以及每篇文章的评论数还是很重要的。但是基于静态的页面想要存储动态的评论数据是比较难的，一般博客主题中都内置了评论插件，但是博客主题中对于最新评论的支持显示还是很少的，至少目前我是没怎么发现。博客 Powered by <a href="http://hexo.io/">Hexo</a> &amp; <a href="http://github.com/ppoffice/hexo-theme-icarus">Icarus</a>，采用<a href="https://github.com/gitalk/gitalk">Gitalk</a>评论，再次感谢此三位作者的辛勤码代码，才有了以下的内容。基于此背景基础上，聊聊最新评论的实现。</p></blockquote><a id="more"></a><p>博客的使用， <a href="http://hexo.io/">Hexo</a> &amp; <a href="http://github.com/ppoffice/hexo-theme-icarus">Icarus</a>，采用<a href="https://github.com/gitalk/gitalk">Gitalk</a>评论 的使用自行百度了。</p><h3 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h3><ul><li>最新评论列表</li><li>最热文章列表（基于评论数判断是否最热，也比较片面，但是侧面也能反映，问题不大）</li></ul><h3 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h3><p>主要参考自<a href="https://developer.github.com/v3/issues/">官方文档</a></p><p>目前主要用到<code>两个方法</code>，一个是获取仓库下所有的issue，每个issue节点下有相关的评论数，以及对应issue下的评论的url;还有一个是根据issue下评论的URL获取相应的所有的评论</p><h4 id="方法1：List-issues-for-a-repository"><a href="#方法1：List-issues-for-a-repository" class="headerlink" title="方法1：List issues for a repository"></a>方法1：<a href="https://developer.github.com/v3/issues/">List issues for a repository</a></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /orgs/:org/issues</span><br></pre></td></tr></table></figure><p>参数列表</p><table><thead><tr><th align="center">Name</th><th align="center">Type</th><th align="center">Description</th></tr></thead><tbody><tr><td align="center"><code>milestone</code></td><td align="center"><code>integer</code> or <code>string</code></td><td align="center">If an <code>integer</code> is passed, it should refer to a milestone by its <code>number</code> field. If the string <code>*</code> is passed, issues with any milestone are accepted. If the string <code>none</code> is passed, issues without milestones are returned.</td></tr><tr><td align="center"><code>state</code></td><td align="center"><code>string</code></td><td align="center">Indicates the state of the issues to return. Can be either <code>open</code>, <code>closed</code>, or <code>all</code>. Default: <code>open</code></td></tr><tr><td align="center"><code>assignee</code></td><td align="center"><code>string</code></td><td align="center">Can be the name of a user. Pass in <code>none</code> for issues with no assigned user, and <code>*</code> for issues assigned to any user.</td></tr><tr><td align="center"><code>creator</code></td><td align="center"><code>string</code></td><td align="center">The user that created the issue.</td></tr><tr><td align="center"><code>mentioned</code></td><td align="center"><code>string</code></td><td align="center">A user that’s mentioned in the issue.</td></tr><tr><td align="center"><code>labels</code></td><td align="center"><code>string</code></td><td align="center">A list of comma separated label names. Example: <code>bug,ui,@high</code></td></tr><tr><td align="center"><code>sort</code></td><td align="center"><code>string</code></td><td align="center">What to sort results by. Can be either <code>created</code>, <code>updated</code>, <code>comments</code>. Default: <code>created</code></td></tr><tr><td align="center"><code>direction</code></td><td align="center"><code>string</code></td><td align="center">The direction of the sort. Can be either <code>asc</code> or <code>desc</code>. Default: <code>desc</code></td></tr><tr><td align="center"><code>since</code></td><td align="center"><code>string</code></td><td align="center">Only issues updated at or after this time are returned. This is a timestamp in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> format: <code>YYYY-MM-DDTHH:MM:SSZ</code>.</td></tr></tbody></table><p>以上参数，主要用到 <code>sort 排序，page页数，per_page每页数量</code>，其余的参数看个人需要使用。<strong>注意文档中的说明，排序的字段和返回的稍许不太一样。</strong></p><h4 id="方法2：List-comments-on-an-issue"><a href="#方法2：List-comments-on-an-issue" class="headerlink" title="方法2：List comments on an issue"></a>方法2：<a href="https://developer.github.com/v3/issues/comments/">List comments on an issue</a></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /repos/:owner/:repo/issues/:issue_number/comments</span><br></pre></td></tr></table></figure><p>Issue Comments are ordered by ascending ID. 排序根据 ascending (上升的，增长的；升（序）的)ID.也就是说，从老到新。这个比较坑，对于我们获取最新评论来说。</p><p>参数如下</p><table><thead><tr><th align="center">Name</th><th align="center">Type</th><th align="center">Description</th></tr></thead><tbody><tr><td align="center"><code>since</code></td><td align="center"><code>string</code></td><td align="center">Only comments updated at or after this time are returned. This is a timestamp in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> format: <code>YYYY-MM-DDTHH:MM:SSZ</code>.</td></tr></tbody></table><p>根据尝试以及以上参数，试出<code>不支持排序，但是支持分页，page,per_page参数</code>，对于我们获取最新的评论来说可以根据评论数，算出分页数，拿到最后一条，即最新一条</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//如果只有一页</span></span><br><span class="line"><span class="keyword">int</span> page = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> per_page = <span class="number">1</span>;</span><br><span class="line"><span class="comment">// 如果超出一页的话</span></span><br><span class="line"><span class="keyword">int</span> page = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">int</span> per_page = commentsNumber-<span class="number">1</span>;<span class="comment">//commentsNumber:评论数</span></span><br></pre></td></tr></table></figure><h4 id="js代码中使用实例核心代码"><a href="#js代码中使用实例核心代码" class="headerlink" title="js代码中使用实例核心代码"></a>js代码中使用实例核心代码</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> timesSet = [];</span><br><span class="line"><span class="keyword">var</span> timesBodyMap = &#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> timesSetMap = &#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> resultArr = [];</span><br><span class="line"><span class="comment">// 方法1：sort=comments可以按评论数排序，此处更适合按更新时间排序,可以根据updated排序，但是0条评论的也会出来，所以此处还是根据评论数排序全部查出来，过滤掉0条评论的，拿到每个issue下最新的一条评论详情和时间，根据时间内存排序</span></span><br><span class="line"><span class="comment">// per_page 每页数量，根据需求配置</span></span><br><span class="line">$.getJSON(<span class="string">"https://api.github.com/repos/&#123;用户名&#125;/&#123;仓库&#125;/issues?per_page=100&amp;sort=comments"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</span><br><span class="line">    $.each(result, <span class="function"><span class="keyword">function</span> (<span class="params">i, item</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> commentsCount = item.comments;</span><br><span class="line">        <span class="keyword">if</span> (commentsCount &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            $.ajaxSettings.async = <span class="literal">false</span>;</span><br><span class="line">            <span class="comment">// 此处保证是最后一条，api没有排序参数，只能分页取最后一条，保证最少的数据量传输，快速处理</span></span><br><span class="line">            <span class="keyword">var</span> page = <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">var</span> pageSize = commentsCount - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (commentsCount == <span class="number">1</span>) &#123;</span><br><span class="line">                page = <span class="number">1</span>;</span><br><span class="line">                pageSize = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 方法2：的使用</span></span><br><span class="line">            $.getJSON(item.comments_url + <span class="string">"?page="</span> + page + <span class="string">"&amp;per_page="</span> + pageSize, <span class="function"><span class="keyword">function</span> (<span class="params">commentResult</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">var</span> item1 = commentResult[<span class="number">0</span>];</span><br><span class="line">                <span class="keyword">var</span> contentStr = item1.body.trim();</span><br><span class="line">                <span class="keyword">if</span> (contentStr.length &gt; <span class="number">50</span>) &#123;</span><br><span class="line">                    contentStr = contentStr.substr(<span class="number">0</span>, <span class="number">60</span>);</span><br><span class="line">                    contentStr += <span class="string">"..."</span>;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">                timesSet.push(<span class="keyword">new</span> <span class="built_in">Date</span>(item1.created_at).getTime());</span><br><span class="line">                timesBodyMap[item1.created_at] = &#123;</span><br><span class="line">                    <span class="string">"title"</span>: item.title.substr(<span class="number">0</span>, item.title.indexOf(<span class="string">"-"</span>) - <span class="number">1</span>),</span><br><span class="line">                    <span class="string">"url"</span>: item.body.substr(<span class="number">0</span>, item.body.indexOf(<span class="string">"\n"</span>) - <span class="number">1</span>),</span><br><span class="line">                    <span class="string">"content"</span>: contentStr,</span><br><span class="line">                    <span class="string">"date"</span>: item1.created_at,</span><br><span class="line">                    <span class="string">"userName"</span>: item1[<span class="string">"user"</span>].login,</span><br><span class="line">                    <span class="string">"userUrl"</span>: item1[<span class="string">"user"</span>].html_url,</span><br><span class="line">                    <span class="string">"commentCount"</span>: commentsCount</span><br><span class="line">                &#125;;</span><br><span class="line">                timesSetMap[<span class="keyword">new</span> <span class="built_in">Date</span>(item1.created_at).getTime()] = item1.created_at;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 排序</span></span><br><span class="line"><span class="keyword">if</span> (timesSet.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    timesSet.sort();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 根据需要取10条</span></span><br><span class="line"><span class="keyword">if</span> (timesSet.length &gt; <span class="number">10</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = timesSet.length - <span class="number">1</span>; i &gt;= <span class="number">0</span> &amp;&amp; resultArr.length &lt; <span class="number">10</span>; i--) &#123;</span><br><span class="line">        resultArr.push(timesBodyMap[timesSetMap[timesSet[i]]]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = timesSet.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        resultArr.push(timesBodyMap[timesSetMap[timesSet[i]]]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="方法1：请求接口地址示例"><a href="#方法1：请求接口地址示例" class="headerlink" title="方法1：请求接口地址示例"></a>方法1：请求接口地址示例</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="comment">//api.github.com/repos/removeif/blog_comment/issues?per_page=100&amp;sort=comments</span></span><br></pre></td></tr></table></figure><p><strong>返回结果</strong></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"url"</span>: <span class="string">"https://api.github.com/repos/removeif/blog_comment/issues/3"</span>,</span><br><span class="line">    <span class="attr">"repository_url"</span>: <span class="string">"https://api.github.com/repos/removeif/blog_comment"</span>,</span><br><span class="line">    <span class="attr">"labels_url"</span>: <span class="string">"https://api.github.com/repos/removeif/blog_comment/issues/3/labels&#123;/name&#125;"</span>,</span><br><span class="line">    <span class="attr">"comments_url"</span>: <span class="string">"https://api.github.com/repos/removeif/blog_comment/issues/3/comments"</span>,</span><br><span class="line">    <span class="attr">"events_url"</span>: <span class="string">"https://api.github.com/repos/removeif/blog_comment/issues/3/events"</span>,</span><br><span class="line">    <span class="attr">"html_url"</span>: <span class="string">"https://github.com/removeif/blog_comment/issues/3"</span>,</span><br><span class="line">    <span class="attr">"id"</span>: <span class="number">458985510</span>,</span><br><span class="line">    <span class="attr">"node_id"</span>: <span class="string">"MDU6SXNzdWU0NTg5ODU1MTA="</span>,</span><br><span class="line">    <span class="attr">"number"</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="attr">"title"</span>: <span class="string">"留言板 - 辣椒の酱"</span>,</span><br><span class="line">    <span class="attr">"user"</span>: &#123;</span><br><span class="line">      <span class="attr">"login"</span>: <span class="string">"removeif"</span>,</span><br><span class="line">      <span class="attr">"id"</span>: <span class="number">10427139</span>,</span><br><span class="line">      <span class="attr">"node_id"</span>: <span class="string">"MDQ6VXNlcjEwNDI3MTM5"</span>,</span><br><span class="line">      <span class="attr">"avatar_url"</span>: <span class="string">"https://avatars1.githubusercontent.com/u/10427139?v=4"</span>,</span><br><span class="line">      <span class="attr">"gravatar_id"</span>: <span class="string">""</span>,</span><br><span class="line">      <span class="attr">"url"</span>: <span class="string">"https://api.github.com/users/removeif"</span>,</span><br><span class="line">      <span class="attr">"html_url"</span>: <span class="string">"https://github.com/removeif"</span>,</span><br><span class="line">      <span class="attr">"followers_url"</span>: <span class="string">"https://api.github.com/users/removeif/followers"</span>,</span><br><span class="line">      <span class="attr">"following_url"</span>: <span class="string">"https://api.github.com/users/removeif/following&#123;/other_user&#125;"</span>,</span><br><span class="line">      <span class="attr">"gists_url"</span>: <span class="string">"https://api.github.com/users/removeif/gists&#123;/gist_id&#125;"</span>,</span><br><span class="line">      <span class="attr">"starred_url"</span>: <span class="string">"https://api.github.com/users/removeif/starred&#123;/owner&#125;&#123;/repo&#125;"</span>,</span><br><span class="line">      <span class="attr">"subscriptions_url"</span>: <span class="string">"https://api.github.com/users/removeif/subscriptions"</span>,</span><br><span class="line">      <span class="attr">"organizations_url"</span>: <span class="string">"https://api.github.com/users/removeif/orgs"</span>,</span><br><span class="line">      <span class="attr">"repos_url"</span>: <span class="string">"https://api.github.com/users/removeif/repos"</span>,</span><br><span class="line">      <span class="attr">"events_url"</span>: <span class="string">"https://api.github.com/users/removeif/events&#123;/privacy&#125;"</span>,</span><br><span class="line">      <span class="attr">"received_events_url"</span>: <span class="string">"https://api.github.com/users/removeif/received_events"</span>,</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"User"</span>,</span><br><span class="line">      <span class="attr">"site_admin"</span>: <span class="literal">false</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"labels"</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"id"</span>: <span class="number">1416043904</span>,</span><br><span class="line">        <span class="attr">"node_id"</span>: <span class="string">"MDU6TGFiZWwxNDE2MDQzOTA0"</span>,</span><br><span class="line">        <span class="attr">"url"</span>: <span class="string">"https://api.github.com/repos/removeif/blog_comment/labels/3306ea6632b94cc388b40cef9dda4a8f"</span>,</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"3306ea6632b94cc388b40cef9dda4a8f"</span>,</span><br><span class="line">        <span class="attr">"color"</span>: <span class="string">"0e8a16"</span>,</span><br><span class="line">        <span class="attr">"default"</span>: <span class="literal">false</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"id"</span>: <span class="number">1415994590</span>,</span><br><span class="line">        <span class="attr">"node_id"</span>: <span class="string">"MDU6TGFiZWwxNDE1OTk0NTkw"</span>,</span><br><span class="line">        <span class="attr">"url"</span>: <span class="string">"https://api.github.com/repos/removeif/blog_comment/labels/Gitalk"</span>,</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"Gitalk"</span>,</span><br><span class="line">        <span class="attr">"color"</span>: <span class="string">"5319e7"</span>,</span><br><span class="line">        <span class="attr">"default"</span>: <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"state"</span>: <span class="string">"open"</span>,</span><br><span class="line">    <span class="attr">"locked"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"assignee"</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">"assignees"</span>: [</span><br><span class="line"></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"milestone"</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">"comments"</span>: <span class="number">33</span>,</span><br><span class="line">    <span class="attr">"created_at"</span>: <span class="string">"2019-06-21T03:06:53Z"</span>,</span><br><span class="line">    <span class="attr">"updated_at"</span>: <span class="string">"2019-09-12T10:37:34Z"</span>,</span><br><span class="line">    <span class="attr">"closed_at"</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">"author_association"</span>: <span class="string">"OWNER"</span>,</span><br><span class="line">    <span class="attr">"body"</span>: <span class="string">"https://removeif.github.io/message/\r\n\r\n留言板信息。"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;...&#125;</span><br><span class="line">  ]</span><br></pre></td></tr></table></figure><h4 id="方法2：请求接口地址示例"><a href="#方法2：请求接口地址示例" class="headerlink" title="方法2：请求接口地址示例"></a>方法2：请求接口地址示例</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="comment">//api.github.com/repos/removeif/blog_comment/issues/3/comments?per_page=32&amp;page=2</span></span><br></pre></td></tr></table></figure><p><strong>返回结果</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"url"</span>: <span class="string">"https://api.github.com/repos/removeif/blog_comment/issues/comments/530767913"</span>,</span><br><span class="line">    <span class="attr">"html_url"</span>: <span class="string">"https://github.com/removeif/blog_comment/issues/3#issuecomment-530767913"</span>,</span><br><span class="line">    <span class="attr">"issue_url"</span>: <span class="string">"https://api.github.com/repos/removeif/blog_comment/issues/3"</span>,</span><br><span class="line">    <span class="attr">"id"</span>: <span class="number">530767913</span>,</span><br><span class="line">    <span class="attr">"node_id"</span>: <span class="string">"MDEyOklzc3VlQ29tbWVudDUzMDc2NzkxMw=="</span>,</span><br><span class="line">    <span class="attr">"user"</span>: &#123;</span><br><span class="line">      <span class="attr">"login"</span>: <span class="string">"removeif"</span>,</span><br><span class="line">      <span class="attr">"id"</span>: <span class="number">10427139</span>,</span><br><span class="line">      <span class="attr">"node_id"</span>: <span class="string">"MDQ6VXNlcjEwNDI3MTM5"</span>,</span><br><span class="line">      <span class="attr">"avatar_url"</span>: <span class="string">"https://avatars1.githubusercontent.com/u/10427139?v=4"</span>,</span><br><span class="line">      <span class="attr">"gravatar_id"</span>: <span class="string">""</span>,</span><br><span class="line">      <span class="attr">"url"</span>: <span class="string">"https://api.github.com/users/removeif"</span>,</span><br><span class="line">      <span class="attr">"html_url"</span>: <span class="string">"https://github.com/removeif"</span>,</span><br><span class="line">      <span class="attr">"followers_url"</span>: <span class="string">"https://api.github.com/users/removeif/followers"</span>,</span><br><span class="line">      <span class="attr">"following_url"</span>: <span class="string">"https://api.github.com/users/removeif/following&#123;/other_user&#125;"</span>,</span><br><span class="line">      <span class="attr">"gists_url"</span>: <span class="string">"https://api.github.com/users/removeif/gists&#123;/gist_id&#125;"</span>,</span><br><span class="line">      <span class="attr">"starred_url"</span>: <span class="string">"https://api.github.com/users/removeif/starred&#123;/owner&#125;&#123;/repo&#125;"</span>,</span><br><span class="line">      <span class="attr">"subscriptions_url"</span>: <span class="string">"https://api.github.com/users/removeif/subscriptions"</span>,</span><br><span class="line">      <span class="attr">"organizations_url"</span>: <span class="string">"https://api.github.com/users/removeif/orgs"</span>,</span><br><span class="line">      <span class="attr">"repos_url"</span>: <span class="string">"https://api.github.com/users/removeif/repos"</span>,</span><br><span class="line">      <span class="attr">"events_url"</span>: <span class="string">"https://api.github.com/users/removeif/events&#123;/privacy&#125;"</span>,</span><br><span class="line">      <span class="attr">"received_events_url"</span>: <span class="string">"https://api.github.com/users/removeif/received_events"</span>,</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"User"</span>,</span><br><span class="line">      <span class="attr">"site_admin"</span>: <span class="literal">false</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"created_at"</span>: <span class="string">"2019-09-12T10:37:34Z"</span>,</span><br><span class="line">    <span class="attr">"updated_at"</span>: <span class="string">"2019-09-12T10:37:34Z"</span>,</span><br><span class="line">    <span class="attr">"author_association"</span>: <span class="string">"OWNER"</span>,</span><br><span class="line">    <span class="attr">"body"</span>: <span class="string">"&gt; 哇 大佬你博客弄的好厉害啊  可以指点指点吗\n&gt;&gt; @xuelangjing 还好吧😂，简简单单的，可以多看下网页上的源码，有什么问题可以讨论讨论哦"</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>博客中目前有两个页面使用,根据个人的需要放到各自的位置吧。</p><p><strong><a href="https://removeif.github.io/">首页热门推荐</a></strong></p><p><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20190913005314.png" alt=""></p><p><strong><a href="https://removeif.github.io/comment/">还有个最新评论页：</a></strong></p><p><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/img/2019/20190913005510.png" alt=""></p><h3 id="扩展一个方法"><a href="#扩展一个方法" class="headerlink" title="扩展一个方法"></a>扩展一个方法</h3><p>上面的实例程序，<code>每个issue（因为我的每个issue关联一个文章链接）</code>只取了一条最新的评论，假如每个issue下有两个都是最新的评论，而我也不管是不是同一个issue下的评论，获取所有的最新评论，还有一个方法比较好用。</p><h4 id="List-comments-in-a-repository"><a href="#List-comments-in-a-repository" class="headerlink" title="List comments in a repository"></a><a href="https://developer.github.com/v3/issues/comments/#list-comments-in-a-repository">List comments in a repository</a></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /repos/:owner/:repo/issues/comments</span><br></pre></td></tr></table></figure><p>By default, Issue Comments are ordered by ascending ID. 和上面一样，但是以下参数就不一样了</p><table><thead><tr><th align="center">Name</th><th align="center">Type</th><th align="center">Description</th></tr></thead><tbody><tr><td align="center"><code>sort</code></td><td align="center"><code>string</code></td><td align="center">Either <code>created</code> or <code>updated</code>. Default: <code>created</code></td></tr><tr><td align="center"><code>direction</code></td><td align="center"><code>string</code></td><td align="center">Either <code>asc</code> or <code>desc</code>. Ignored without the <code>sort</code> parameter.</td></tr><tr><td align="center"><code>since</code></td><td align="center"><code>string</code></td><td align="center">Only comments updated at or after this time are returned. This is a timestamp in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> format: <code>YYYY-MM-DDTHH:MM:SSZ</code>.</td></tr></tbody></table><p>多了<code>排序字段和排序方式，也有per和per_page</code>，这是相当的有用啊</p><h4 id="扩展方法：请求接口地址示例"><a href="#扩展方法：请求接口地址示例" class="headerlink" title="扩展方法：请求接口地址示例"></a>扩展方法：请求接口地址示例</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="comment">//api.github.com/repos/removeif/blog_comment/issues/comments?sort=updated&amp;direction=desc&amp;per_page=10&amp;page=1</span></span><br></pre></td></tr></table></figure><p>返回结果</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"url"</span>: <span class="string">"https://api.github.com/repos/removeif/blog_comment/issues/comments/530767913"</span>,</span><br><span class="line">    <span class="attr">"html_url"</span>: <span class="string">"https://github.com/removeif/blog_comment/issues/3#issuecomment-530767913"</span>,</span><br><span class="line">    <span class="attr">"issue_url"</span>: <span class="string">"https://api.github.com/repos/removeif/blog_comment/issues/3"</span>,</span><br><span class="line">    <span class="attr">"id"</span>: <span class="number">530767913</span>,</span><br><span class="line">    <span class="attr">"node_id"</span>: <span class="string">"MDEyOklzc3VlQ29tbWVudDUzMDc2NzkxMw=="</span>,</span><br><span class="line">    <span class="attr">"user"</span>: &#123;</span><br><span class="line">      <span class="attr">"login"</span>: <span class="string">"removeif"</span>,</span><br><span class="line">      <span class="attr">"id"</span>: <span class="number">10427139</span>,</span><br><span class="line">      <span class="attr">"node_id"</span>: <span class="string">"MDQ6VXNlcjEwNDI3MTM5"</span>,</span><br><span class="line">      <span class="attr">"avatar_url"</span>: <span class="string">"https://avatars1.githubusercontent.com/u/10427139?v=4"</span>,</span><br><span class="line">      <span class="attr">"gravatar_id"</span>: <span class="string">""</span>,</span><br><span class="line">      <span class="attr">"url"</span>: <span class="string">"https://api.github.com/users/removeif"</span>,</span><br><span class="line">      <span class="attr">"html_url"</span>: <span class="string">"https://github.com/removeif"</span>,</span><br><span class="line">      <span class="attr">"followers_url"</span>: <span class="string">"https://api.github.com/users/removeif/followers"</span>,</span><br><span class="line">      <span class="attr">"following_url"</span>: <span class="string">"https://api.github.com/users/removeif/following&#123;/other_user&#125;"</span>,</span><br><span class="line">      <span class="attr">"gists_url"</span>: <span class="string">"https://api.github.com/users/removeif/gists&#123;/gist_id&#125;"</span>,</span><br><span class="line">      <span class="attr">"starred_url"</span>: <span class="string">"https://api.github.com/users/removeif/starred&#123;/owner&#125;&#123;/repo&#125;"</span>,</span><br><span class="line">      <span class="attr">"subscriptions_url"</span>: <span class="string">"https://api.github.com/users/removeif/subscriptions"</span>,</span><br><span class="line">      <span class="attr">"organizations_url"</span>: <span class="string">"https://api.github.com/users/removeif/orgs"</span>,</span><br><span class="line">      <span class="attr">"repos_url"</span>: <span class="string">"https://api.github.com/users/removeif/repos"</span>,</span><br><span class="line">      <span class="attr">"events_url"</span>: <span class="string">"https://api.github.com/users/removeif/events&#123;/privacy&#125;"</span>,</span><br><span class="line">      <span class="attr">"received_events_url"</span>: <span class="string">"https://api.github.com/users/removeif/received_events"</span>,</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"User"</span>,</span><br><span class="line">      <span class="attr">"site_admin"</span>: <span class="literal">false</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"created_at"</span>: <span class="string">"2019-09-12T10:37:34Z"</span>,</span><br><span class="line">    <span class="attr">"updated_at"</span>: <span class="string">"2019-09-12T10:37:34Z"</span>,</span><br><span class="line">    <span class="attr">"author_association"</span>: <span class="string">"OWNER"</span>,</span><br><span class="line">    <span class="attr">"body"</span>: <span class="string">"&gt; 哇 大佬你博客弄的好厉害啊  可以指点指点吗\n&gt;&gt; @xuelangjing 还好吧😂，简简单单的，可以多看下网页上的源码，有什么问题可以讨论讨论哦"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">  ]</span><br></pre></td></tr></table></figure><h4 id="总结此扩展方法"><a href="#总结此扩展方法" class="headerlink" title="总结此扩展方法"></a>总结此扩展方法</h4><p><strong>优点：</strong>对于不在乎issue数量，只在乎最新评论的就比较适用，能够精准拿出前10条，很赞<br><strong>不足：</strong>一个issue下多个最新评论，如果想要显示的最新评论列表还包括文章标题，看起来可能不太好看，很多重复，但是看个人需要吧</p><h4 id="注意事项，采坑环节"><a href="#注意事项，采坑环节" class="headerlink" title="注意事项，采坑环节"></a>注意事项，采坑环节</h4><ul><li>对应接口的请求限制，目前接口有请求的限制，所以使用中不能频繁请求，调试的时候一会儿又限制，一会儿又限制比较麻烦，限制十几分钟之后就解除了。</li><li>对于页面中，一般很多个地方可能都需要展示这个列表，所以不能每次都去请求，必须缓存起来，一般缓存到本地，我的是存的cookie中，十分钟去请求一次，所以调好后一般不会出现限制情况。但是马上评论了的就看不到，有10分钟的延迟，不过也还好。</li><li>对于如果issue以及评论太多的情况，尽量的少请求，比如上面的分页优化，取最后一条。以及页面中请求时做出异步请求的方式，不要阻止其他元素的渲染。</li></ul><p>本人主要做后端，对前端的<code>set/排序</code>不太熟悉，上面实现排序代码比较繁琐😂，如果有什么更好的方法，麻烦也告知一下，互相学习共同进步。</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;博客中，对于网友的评论以及每篇文章的评论数还是很重要的。但是基于静态的页面想要存储动态的评论数据是比较难的，一般博客主题中都内置了评论插件，但是博客主题中对于最新评论的支持显示还是很少的，至少目前我是没怎么发现。博客 Powered by &lt;a href=&quot;http://hexo.io/&quot;&gt;Hexo&lt;/a&gt; &amp;amp; &lt;a href=&quot;http://github.com/ppoffice/hexo-theme-icarus&quot;&gt;Icarus&lt;/a&gt;，采用&lt;a href=&quot;https://github.com/gitalk/gitalk&quot;&gt;Gitalk&lt;/a&gt;评论，再次感谢此三位作者的辛勤码代码，才有了以下的内容。基于此背景基础上，聊聊最新评论的实现。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="工具教程" scheme="https://xmgeek.github.io/categories/%E5%B7%A5%E5%85%B7%E6%95%99%E7%A8%8B/"/>
    
      <category term="主题工具" scheme="https://xmgeek.github.io/categories/%E5%B7%A5%E5%85%B7%E6%95%99%E7%A8%8B/%E4%B8%BB%E9%A2%98%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="icarus主题配置" scheme="https://xmgeek.github.io/tags/icarus%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE/"/>
    
      <category term="hexo主题" scheme="https://xmgeek.github.io/tags/hexo%E4%B8%BB%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>安装、部分配置icarus主题中文版</title>
    <link href="https://xmgeek.github.io/posts/52c38f29/"/>
    <id>https://xmgeek.github.io/posts/52c38f29/</id>
    <published>2019-02-28T02:36:56.000Z</published>
    <updated>2020-06-11T15:48:12.158Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>摘要<br>发现icarus主题还不错，花了一两个小时研究了下安装、部分配置icarus主题中文版</p></blockquote><a id="more"></a><h2 id="安装icarus"><a href="#安装icarus" class="headerlink" title="安装icarus"></a>安装icarus</h2><ul><li>直接下载主题模块放到blog项目 ,blog项目根目录执行</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https:<span class="comment">//github.com/ppoffice/hexo-theme-icarus.git themes/icarus</span></span><br></pre></td></tr></table></figure><p>此时已经下载到项目中。</p><ul><li><p>顶级_config.yml中选择<code>icarus</code>主题</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># Extensions</span><br><span class="line">## Plugins: https://hexo.io/plugins/</span><br><span class="line">## Themes: https://hexo.io/themes/</span><br><span class="line">theme: icarus</span><br></pre></td></tr></table></figure></li><li><p>此时主题已经安装好，清除、编译、部署可以看到效果了</p><p><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/20190620160640.png" alt=""></p></li></ul><h2 id="配置icarus"><a href="#配置icarus" class="headerlink" title="配置icarus"></a>配置icarus</h2><ul><li>完全参照<a href="https://blog.zhangruipeng.me/hexo-theme-icarus/categories/Configuration/Posts/">官网</a>配置，进行翻译解说</li></ul><h3 id="配置文章部分"><a href="#配置文章部分" class="headerlink" title="配置文章部分"></a>配置文章部分</h3><h4 id="顶部图片添加"><a href="#顶部图片添加" class="headerlink" title="顶部图片添加"></a>顶部图片添加</h4><p>icarus 主题中的配置_config.yml中开启图片开关</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">article:</span><br><span class="line">    thumbnail: <span class="keyword">true</span></span><br></pre></td></tr></table></figure><p>文章.md文件头中添加图片绝对/相对地址</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">title: Getting Started with Icarus</span><br><span class="line">thumbnail: /gallery/thumbnails/desert.jpg</span><br><span class="line"><span class="comment">// thumbnail:https://cdn.jsdelivr.net/gh/removeif/blog_image/20190620152744.png</span></span><br><span class="line">---</span><br><span class="line">Post content...</span><br></pre></td></tr></table></figure><p>配置完成后部署显示效果如下(最新文章列表显示缩略图、文章开头显示一张设置图片)</p><p><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/20190620160657.png" alt=""></p><h4 id="左边文章导航栏开启"><a href="#左边文章导航栏开启" class="headerlink" title="左边文章导航栏开启"></a>左边文章导航栏开启</h4><p>icarus 主题中的配置_config.yml中开关</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">widgets:</span><br><span class="line">    -</span><br><span class="line">        type: toc</span><br><span class="line">        position: left</span><br></pre></td></tr></table></figure><p>同事文章顶部加入标签</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">title: Table of Contents Example</span><br><span class="line">toc: <span class="keyword">true</span></span><br><span class="line">---</span><br><span class="line">Post content...</span><br></pre></td></tr></table></figure><p>配置效果</p><p><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/20190620160721.png" alt=""></p><h5 id="评论系统开启"><a href="#评论系统开启" class="headerlink" title="评论系统开启"></a>评论系统开启</h5><p>icarus 主题中的配置_config.yml中开启（部分评论系统需要翻墙才能使用，valine不用翻墙个人推荐，<a href="https://valine.js.org/quickstart.html">valine安装参考</a>）</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">comment:</span><br><span class="line">    type: valine</span><br><span class="line">    app_id: xxxxxxxx        # (required) LeanCloud application id</span><br><span class="line">    app_key: xxxxxxxx       # (required) LeanCloud application key</span><br><span class="line">    notify: false           # (optional) receive email notification</span><br><span class="line">    verify: false           # (optional) show verification code</span><br><span class="line">    placeholder: xxxxxxxx   # (optional) comment box placeholder text</span><br></pre></td></tr></table></figure><p>开启效果</p><p><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/20190620160740.png" alt=""></p><h4 id="捐赠收款开启"><a href="#捐赠收款开启" class="headerlink" title="捐赠收款开启"></a>捐赠收款开启</h4><p>icarus 主题中的配置_config.yml中开启 注意如果默认不配置，编译时有报错，可以# 把它注释掉，不启用功能 </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">donate:</span><br><span class="line">    -</span><br><span class="line">        # Donation entry name</span><br><span class="line">        type: alipay</span><br><span class="line">        # Qrcode image URL</span><br><span class="line">        qrcode: <span class="string">'https://wx2.sinaimg.cn/large/b5d1b710gy1g0lvxdcwm0j20p011i4bg.jpg'</span> </span><br><span class="line">    -</span><br><span class="line">        # Donation entry name</span><br><span class="line">        type: wechat</span><br><span class="line">        # Qrcode image URL</span><br><span class="line">        qrcode: <span class="string">'https://wx2.sinaimg.cn/large/b5d1b710gy1g0lvwdcpb5j20u014qgy2.jpg'</span></span><br></pre></td></tr></table></figure><p>开启配置效果如下</p><p><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/20190620160805.png" alt=""></p><h3 id="全局搜索开启"><a href="#全局搜索开启" class="headerlink" title="全局搜索开启"></a>全局搜索开启</h3><p>icarus 主题中的配置_config.yml中开启,不同的搜索类型需要<a href="https://blog.zhangruipeng.me/hexo-theme-icarus/categories/Plugins/Search/">安装插件参考官网</a>,type: insight此类型不需要安装，已经内置</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">search:</span><br><span class="line">    type: insight</span><br></pre></td></tr></table></figure><p>效果如下</p><p><img src="https://cdn.jsdelivr.net/gh/removeif/blog_image/20190620161155.png" alt=""></p><h3 id="更多配置请参考官网配置"><a href="#更多配置请参考官网配置" class="headerlink" title="更多配置请参考官网配置"></a>更多配置请参考官网配置</h3><p>目前配置基本已经够使用，还需要更多配置请参考<a href="https://blog.zhangruipeng.me/hexo-theme-icarus/categories/Configuration/Posts/">连接</a></p><p><a href="https://blog.zhangruipeng.me/hexo-theme-icarus/categories/Configuration/Posts/">参考自</a></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;摘要&lt;br&gt;发现icarus主题还不错，花了一两个小时研究了下安装、部分配置icarus主题中文版&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="工具教程" scheme="https://xmgeek.github.io/categories/%E5%B7%A5%E5%85%B7%E6%95%99%E7%A8%8B/"/>
    
      <category term="主题工具" scheme="https://xmgeek.github.io/categories/%E5%B7%A5%E5%85%B7%E6%95%99%E7%A8%8B/%E4%B8%BB%E9%A2%98%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="icarus主题配置" scheme="https://xmgeek.github.io/tags/icarus%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE/"/>
    
      <category term="hexo主题" scheme="https://xmgeek.github.io/tags/hexo%E4%B8%BB%E9%A2%98/"/>
    
  </entry>
  
</feed>
